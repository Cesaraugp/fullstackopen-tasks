{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","handleOnChange","name","onChange","PersonForm","newName","newPhone","inputChangeHandler","buttonHandler","value","onClick","type","Person","id","phone","deletePerson","Persons","filter","persons","deletePersonsHandler","map","person","toLowerCase","includes","toString","baseUrl","personsServices","saveNewPerson","newPerson","axios","post","then","response","data","delete","console","log","updateNumber","changedPerson","put","Notification","props","message","isError","classes","className","App","useState","notification","setNotification","setPersons","setNewName","setNewPhone","setFilter","useEffect","get","e","target","trim","preventDefault","alert","alreadyHasName","some","alreadyHasNumber","window","confirm","find","p","setTimeout","concat","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e20169f4.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ handleOnChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input name=\"filter\" onChange={handleOnChange} />\r\n    </div>\r\n  );\r\n};\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  newName,\r\n  newPhone,\r\n  inputChangeHandler,\r\n  buttonHandler,\r\n}) => {\r\n  return (\r\n    <form>\r\n      <div>\r\n        name:{\" \"}\r\n        <input name=\"name\" value={newName} onChange={inputChangeHandler} />\r\n      </div>\r\n      <div>\r\n        number:{\" \"}\r\n        <input name=\"phone\" value={newPhone} onChange={inputChangeHandler} />\r\n      </div>\r\n      <div>\r\n        <button onClick={buttonHandler} type=\"submit\">\r\n          add\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\nconst Person = ({ id, name, phone, deletePerson }) => {\r\n  return (\r\n    <div>\r\n      <p>\r\n        {name} {phone} <button onClick={() => deletePerson(id)}>Delete</button>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\nconst Persons = ({ filter, persons, deletePersonsHandler }) => {\r\n  if (filter !== \"\") {\r\n    return (\r\n      <>\r\n        {persons.map((person) => {\r\n          if (\r\n            person.name.toLowerCase().includes(filter) ||\r\n            person.phone.toString().includes(filter)\r\n          )\r\n            return (\r\n              <Person\r\n                id={person.id}\r\n                name={person.name}\r\n                phone={person.phone}\r\n                deletePerson={deletePersonsHandler}\r\n              />\r\n            );\r\n          else return false;\r\n        })}\r\n      </>\r\n    );\r\n  }\r\n  return (\r\n    <>\r\n      {persons.map((person) => {\r\n        return (\r\n          <Person\r\n            key={person.id}\r\n            id={person.id}\r\n            name={person.name}\r\n            phone={person.phone}\r\n            deletePerson={deletePersonsHandler}\r\n          />\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons/\";\r\n\r\nconst updateNumber = (id, changedPerson) => {\r\n  const req = axios.put(`${baseUrl}/${id}`, changedPerson);\r\n  return req.then((response) => response.data);\r\n};\r\n\r\nconst saveNewPerson = (newPerson) => {\r\n  const request = axios.post(baseUrl, newPerson);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const req = axios.delete(`${baseUrl}/${id}`);\r\n  return req.then(() => {\r\n    console.log(\"User sucessfully deleted\");\r\n  });\r\n};\r\n\r\nconst personsServices = {\r\n  saveNewPerson,\r\n  deletePerson,\r\n  updateNumber,\r\n};\r\n\r\nexport default personsServices;\r\n","const Notification = ({ props }) => {\r\n  if (props == null) {\r\n    return null;\r\n  }\r\n  const { message, isError } = props;\r\n  console.log(message, isError);\r\n  const classes = `notification ${!isError ? \"success\" : \"error\"}`;\r\n  return <div className={classes}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport axios from \"axios\";\r\nimport personsServices from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [notification, setNotification] = useState();\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newPhone, setNewPhone] = useState(\"\");\r\n  const [filter, setFilter] = useState(\"\");\r\n\r\n  const hook = () => {\r\n    axios.get(\"/api/persons/\").then((response) => setPersons(response.data));\r\n  };\r\n  useEffect(hook, []);\r\n\r\n  const inputChangeHandler = (e) => {\r\n    if (e.target.name === \"name\") {\r\n      setNewName(e.target.value);\r\n      return;\r\n    }\r\n    setNewPhone(e.target.value);\r\n  };\r\n\r\n  const buttonSubmitHandler = (e) => {\r\n    e.preventDefault();\r\n    if (!newName | !newPhone) {\r\n      alert(`Please fill the ${!newName ? \"name\" : \"phone\"} field`);\r\n      return;\r\n    }\r\n    const alreadyHasName = persons.some(\r\n      (person) => person[\"name\"].toLowerCase() === newName.toLowerCase()\r\n    );\r\n    const alreadyHasNumber = persons.some(\r\n      (person) => person[\"phone\"].toString() === newPhone\r\n    );\r\n\r\n    if (alreadyHasNumber || alreadyHasName) {\r\n      if (alreadyHasNumber) {\r\n        alert(`The number ${newPhone} is already registered`);\r\n        return;\r\n      }\r\n      const isUpdate = window.confirm(\r\n        `¿${newName} is already registered on the phonebook, do you want to replace the old number with the new one?`\r\n      );\r\n\r\n      if (isUpdate) {\r\n        const person = persons.find(\r\n          (p) => p.name.toLowerCase() === newName.toLowerCase()\r\n        );\r\n        const changedPerson = { ...person, phone: newPhone };\r\n        const { id } = person;\r\n        personsServices.updateNumber(id, changedPerson).then((data) => {\r\n          setPersons(persons.map((p) => (p.id !== id ? p : data)));\r\n        });\r\n      }\r\n    }\r\n\r\n    if (!alreadyHasName && !alreadyHasNumber) {\r\n      personsServices\r\n        .saveNewPerson({ name: newName, phone: newPhone })\r\n        .then((response) => {\r\n          setNotification({\r\n            message: `Added ${newName}:${newPhone}`,\r\n            isError: false,\r\n          });\r\n          setTimeout(() => {\r\n            setNotification(null);\r\n          }, 3000);\r\n          setPersons(persons.concat(response));\r\n          setNewName(\"\");\r\n          setNewPhone(\"\");\r\n          return;\r\n        })\r\n        .catch((error) => {\r\n          console.log(error.response.data.error);\r\n          setNotification({\r\n            message: error.response.data.error,\r\n            isError: true,\r\n          });\r\n          setTimeout(() => {\r\n            setNotification(null);\r\n          }, 3000);\r\n        });\r\n    }\r\n  };\r\n\r\n  const searchPersons = (e) => {\r\n    setFilter(e.target.value.toLowerCase().trim());\r\n  };\r\n\r\n  const deletePersonsHandler = (id) => {\r\n    const { name } = persons.find((p) => p.id === id);\r\n    const isDelete = window.confirm(\r\n      `¿are you sure you want to delete ${name}?`\r\n    );\r\n    if (isDelete) {\r\n      personsServices\r\n        .deletePerson(id)\r\n        .then(() => {\r\n          setPersons(persons.filter((p) => p.id !== id));\r\n        })\r\n        .catch(() => {\r\n          setNotification({\r\n            message: `Information from ${name} has already been removed from the server`,\r\n            isError: true,\r\n          });\r\n          setTimeout(() => {\r\n            setNotification(null);\r\n          }, 3000);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification props={notification} />\r\n      <Filter handleOnChange={searchPersons} />\r\n      <h2>Add a new</h2>\r\n      <PersonForm\r\n        newName={newName}\r\n        newPhone={newPhone}\r\n        inputChangeHandler={inputChangeHandler}\r\n        buttonHandler={buttonSubmitHandler}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        filter={filter}\r\n        persons={persons}\r\n        deletePersonsHandler={deletePersonsHandler}\r\n      />\r\n      ...\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ReactDOM from \"react-dom\";\r\nimport App from \"./App.js\";\r\nimport \"./index.css\";\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}